!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("bignumber.js")):"function"==typeof define&&define.amd?define(["lodash","bignumber"],e):"object"==typeof exports?exports.PayseraMoney=e(require("lodash"),require("bignumber.js")):t.PayseraMoney=e(t._,t.BigNumber)}("undefined"!=typeof self?self:this,(function(t,e){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e,r){"use strict";r.r(e),r.d(e,"Money",(function(){return _})),r.d(e,"AggregatedMoney",(function(){return k}));var n=r(0);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Error));function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s=function(t){function e(){return a(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Error));function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=function(t){function e(){return l(this,e),f(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Error));function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var g=function(t){function e(){return y(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Error)),b=function(t){if(""===t||null===t)return null;if(Object(n.isNumber)(t))return t;if(Object(n.isString)(t)){var e=t.replace(",",".");if(e.split(".").length>2)throw new h("Invalid amount: "+t);if(!e.match(/^[-+]?\d+(\.\d+)?$/))throw new h("Amount has invalid chars: "+t);return""!==(e=e.replace(/^([-+]?)0+(\d)/,"$1$2"))?e:null}throw new h("Amount is neither string nor number: "+t)},v={AED:2,AFN:2,ALL:2,AMD:0,ANG:2,AOA:1,ARS:2,AUD:2,AWG:2,AZN:2,BAM:2,BBD:2,BDT:2,BGN:2,BHD:3,BIF:0,BMD:2,BND:2,BOB:2,BRL:2,BSD:2,BTN:2,BWP:2,BYR:0,BYN:2,BZD:2,CAD:2,CDF:2,CHF:2,CLP:0,CNY:2,COP:2,CRC:2,CUP:2,CVE:2,CZK:2,DJF:0,DKK:2,DOP:2,DZD:2,EEK:2,EGP:2,ERN:2,ETB:2,EUR:2,FJD:2,FKP:2,GBP:2,GEL:2,GHS:2,GIP:2,GMD:2,GNF:0,GTQ:2,GYD:2,HKD:2,HNL:2,HRK:2,HTG:2,HUF:2,IDR:0,ILS:2,INR:2,IQD:0,IRR:0,ISK:0,JMD:2,JOD:3,JPY:0,KES:2,KGS:2,KHR:0,KMF:0,KPW:0,KRW:0,KWD:3,KYD:2,KZT:2,LAK:0,LBP:2,LKR:2,LRD:2,LSL:2,LTL:2,LVL:2,LYD:3,MAD:2,MDL:2,MGA:1,MKD:2,MMK:0,MNT:2,MOP:1,MRO:1,MUR:2,MVR:2,MWK:2,MXN:2,MYR:2,MZN:2,NAD:2,NGN:2,NIO:2,NOK:2,NPR:2,NZD:2,OMR:3,PAB:2,PEN:2,PGK:2,PHP:2,PKR:2,PLN:2,PYG:0,QAR:2,RON:2,RSD:2,RUB:2,RUR:2,RWF:0,SAR:2,SBD:2,SCR:2,SDG:2,SEK:2,SGD:2,SHP:2,SLL:0,SOS:2,SRD:2,STD:0,SYP:2,SZL:2,THB:2,TJS:2,TMT:2,TND:3,TOP:2,TRY:2,TTD:2,TWD:1,TZS:2,UAH:2,UGX:0,USD:2,UYU:2,UZS:2,VEF:2,VND:0,VUV:0,WST:2,XAF:0,XAG:4,XAU:6,XCD:2,XOF:0,XPF:0,XPT:6,YER:0,ZAR:2,ZMW:0,ZWL:2},m=function(t){if(null===t||""===t)throw new g("Currency not provided");var e=t.toUpperCase();if(Object(n.isUndefined)(v[e]))throw new g("Unsupported currency: "+t);return e},d=r(1),O=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var A={DECIMAL_PLACES:20,FORMAT:{decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0}},P=function(t,e,r){return Object.assign({},A,{DECIMAL_PLACES:t,FORMAT:Object.assign({},A.FORMAT,{decimalSeparator:e,groupSeparator:r})})},S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.DECIMAL_PLACES,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.FORMAT.decimalSeparator,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.FORMAT.groupSeparator;w(this,t),this.config=P(e,r,n)}return O(t,[{key:"createBigNumberInstance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=d.BigNumber.clone(Object.assign({},this.config,e||{}));return new r(t)}},{key:"add",value:function(t,e){return this.createBigNumberInstance(t).plus(e).toString()}},{key:"sub",value:function(t,e){return this.createBigNumberInstance(t).minus(e).toString()}},{key:"div",value:function(t,e){return this.createBigNumberInstance(t).dividedBy(e).toString()}},{key:"mul",value:function(t,e){return this.createBigNumberInstance(t).multipliedBy(e).toString()}},{key:"abs",value:function(t){return this.createBigNumberInstance(t).absoluteValue().toString()}},{key:"isGt",value:function(t,e){return this.createBigNumberInstance(t).isGreaterThan(e)}},{key:"isGte",value:function(t,e){return this.createBigNumberInstance(t).isGreaterThanOrEqualTo(e)}},{key:"isLt",value:function(t,e){return this.createBigNumberInstance(t).isLessThan(e)}},{key:"isLte",value:function(t,e){return this.createBigNumberInstance(t).isLessThanOrEqualTo(e)}},{key:"isEqual",value:function(t,e){return this.createBigNumberInstance(t).isEqualTo(e)}},{key:"isNegative",value:function(t){return this.createBigNumberInstance(t).isNegative()}},{key:"isZero",value:function(t){return this.createBigNumberInstance(t).isZero()}},{key:"isPositive",value:function(t){return this.createBigNumberInstance(t).isPositive()}},{key:"round",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.createBigNumberInstance(t).toFixed(e).toString()}},{key:"ceil",value:function(t,e){return this.createBigNumberInstance(t).toFixed(e,d.BigNumber.ROUND_CEIL).toString()}},{key:"floor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.createBigNumberInstance(t).toFixed(e,d.BigNumber.ROUND_FLOOR).toString()}},{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";return this.createBigNumberInstance(t,P(e,r,n)).toFormat(e)}}]),t}(),C=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var N=null,_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;j(this,t),this.amount=b(e),this.currency=m(r),this.decimalPlaces=null===n?6:n}return C(t,[{key:"getAmount",value:function(){return this.amount}},{key:"getAmountInCents",value:function(){if(null===this.amount)return null;var t=this.getMath().floor(this.getMath().mul(this.amount,Math.pow(10,this.getFraction(this.currency)))),e=parseInt(t,10);if(e.toString()!==t)throw new s("Amount is too large to be returned as integer");return e}},{key:"getCurrency",value:function(){return this.currency}},{key:"add",value:function(e){return this.throwErrorIfNotSameCurrency(e),new t(this.getMath().add(this.getAmount(),e.getAmount()),this.getCurrency())}},{key:"sub",value:function(e){return this.throwErrorIfNotSameCurrency(e),new t(this.getMath().sub(this.getAmount(),e.getAmount()),this.getCurrency())}},{key:"mul",value:function(e){return new t(this.getMath().mul(this.getAmount(),e),this.getCurrency())}},{key:"div",value:function(e){if("0"===e||0===e)throw new s("Division by zero");return new t(this.getMath().div(this.getAmount(),e),this.getCurrency())}},{key:"negate",value:function(){return this.mul(-1)}},{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new t(this.getMath().round(this.getAmount(),this.getCurrencyFraction(this.getCurrency(),e)),this.getCurrency())}},{key:"ceil",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new t(this.getMath().ceil(this.getAmount(),this.getCurrencyFraction(this.getCurrency(),e)),this.getCurrency())}},{key:"floor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new t(this.getMath().floor(this.getAmount(),this.getCurrencyFraction(this.getCurrency(),e)),this.getCurrency())}},{key:"abs",value:function(){return new t(this.getMath().abs(this.getAmount()),this.getCurrency())}},{key:"isGt",value:function(t){return this.throwErrorIfNotSameCurrency(t),this.getMath().isGt(this.getAmount(),t.getAmount())}},{key:"isGte",value:function(t){return this.throwErrorIfNotSameCurrency(t),this.getMath().isGte(this.getAmount(),t.getAmount())}},{key:"isLt",value:function(t){return this.throwErrorIfNotSameCurrency(t),this.getMath().isLt(this.getAmount(),t.getAmount())}},{key:"isLte",value:function(t){return this.throwErrorIfNotSameCurrency(t),this.getMath().isLte(this.getAmount(),t.getAmount())}},{key:"isEqual",value:function(t){return!(!this.isZero()||!t.isZero())||!!this.isSameCurrency(t)&&this.getMath().isEqual(this.getAmount(),t.getAmount())}},{key:"isNegative",value:function(){return this.getMath().isNegative()}},{key:"isZero",value:function(){return this.getMath().isZero(this.getAmount())}},{key:"isPositive",value:function(){return this.getMath().isPositive(this.getAmount())}},{key:"isSameCurrency",value:function(t){return this.getCurrency()===t.getCurrency()}},{key:"formatAmount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.getCurrencyFraction(this.getCurrency(),t);return this.getMath().format(this.getAmount(),n,null===e?"":e,null===r?"":r)}},{key:"getAsString",value:function(){return this.formatAmount()+" "+this.getCurrency()}},{key:"throwErrorIfNotSameCurrency",value:function(t){if(!this.isSameCurrency(t))throw new u("Operand currency doesn't match (lop_currency="+this.getCurrency()+", rop_currency="+t.getCurrency()+")")}},{key:"getFraction",value:function(t){var e=t.toUpperCase();if(Object(n.isUndefined)(v[e]))throw new g("Given currency doesn't have fraction");return v[e]}},{key:"getCurrencyFraction",value:function(t,e){return null!==e?e:this.getFraction(t)}},{key:"getMath",value:function(){return null===N&&(N=new S(this.decimalPlaces)),N}}],[{key:"createZero",value:function(e){return new t("0",e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e,r)}}]),t}(),M=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.moneyList={}}return M(t,[{key:"addAll",value:function(t){var e=this;return t.forEach((function(t){e.add(t)})),this}},{key:"add",value:function(t){var e=t.getCurrency(),r=this.get(e);return null===r&&(r=_.createZero(e),this.moneyList[e]=r),this.moneyList[e]=r.add(t),this}},{key:"get",value:function(t){return Object(n.isUndefined)(this.moneyList[t])?null:this.moneyList[t]}},{key:"getAll",value:function(){return Object.values(this.moneyList)}}]),t}()}])}));
//# sourceMappingURL=main.js.map